import{a as u,f as x,t as Q}from"../chunks/BiJxVpo9.js";import"../chunks/BiAr0RZO.js";import{o as ge}from"../chunks/DwgeY8IZ.js";import{B as xe,C as V,D as _e,E as ye,l as w,F as he,G as Ee,p as we,H as Se,I as De,a as Ve,s as b,g as t,c as i,b as n,r as l,m as S,A as ke,f as C}from"../chunks/BM0BOJ_K.js";import{e as j,s as k}from"../chunks/C70KG6PD.js";import{i as D}from"../chunks/lBVMX08X.js";import{e as Re,i as Ae,s as Ie}from"../chunks/D55AcWLF.js";import{a as Ce,r as X,b as Te,c as Ue,d as Z}from"../chunks/DiFk3Wwi.js";import{i as Ne}from"../chunks/BQGcNskH.js";import{o as Oe}from"../chunks/DxLDlsmA.js";import"../chunks/D7Cp3lZ_.js";import{r as $,o as ee,p as Le}from"../chunks/DYCGrr02.js";function te(e,g,v=g){var f=new WeakSet;xe(e,"input",async c=>{var d=c?e.defaultValue:e.value;if(d=B(e)?q(d):d,v(d),V!==null&&f.add(V),await _e(),d!==(d=g())){var h=e.selectionStart,m=e.selectionEnd,R=e.value.length;if(e.value=d??"",m!==null){var _=e.value.length;h===m&&m===R&&_>R?(e.selectionStart=_,e.selectionEnd=_):(e.selectionStart=h,e.selectionEnd=Math.min(m,_))}}}),(ye&&e.defaultValue!==e.value||w(g)==null&&e.value)&&(v(B(e)?q(e.value):e.value),V!==null&&f.add(V)),he(()=>{var c=g();if(e===document.activeElement){var d=Ee??V;if(f.has(d))return}B(e)&&c===q(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function B(e){var g=e.type;return g==="number"||g==="range"}function q(e){return e===""?null:+e}const Me={ADD_SERVICE:"ADD_SERVICE",REMOVE_SERVICE:"REMOVE_SERVICE",UPDATE_SERVICE:"UPDATE_SERVICE"};var Pe=x('<button class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded">Sign Out</button>'),Ge=x('<button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">Sign In with Google</button>'),je=x('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"> </div>'),Be=x('<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4"> </div>'),qe=x('<tr><td class="px-5 py-5 border-b border-gray-200 bg-white text-sm"> </td><td class="px-5 py-5 border-b border-gray-200 bg-white text-sm"><span> </span></td><td class="px-5 py-5 border-b border-gray-200 bg-white text-sm"><!></td></tr>'),Fe=x('<p class="text-center text-gray-500 py-4">No events found.</p>'),He=x('<div class="bg-white shadow rounded-lg p-6 mb-6"><h2 class="text-xl font-semibold mb-4">Add New Service</h2> <!> <!> <div class="mb-4"><label class="block text-gray-700 text-sm font-bold mb-2" for="name">Service Name</label> <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="name" type="text" placeholder="e.g. Google"/></div> <div class="mb-6"><label class="block text-gray-700 text-sm font-bold mb-2" for="url">Service URL</label> <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="url" type="url" placeholder="https://google.com"/></div> <button class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full">Dispatch Add Event</button></div> <div class="bg-white shadow rounded-lg p-6"><h2 class="text-xl font-semibold mb-4">Event Log</h2> <div class="overflow-x-auto"><table class="min-w-full leading-normal"><thead><tr><th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Time</th><th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Type</th><th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Target</th></tr></thead><tbody></tbody></table> <!></div></div>',1),We=x('<div class="text-center py-20"><p class="text-xl text-gray-600 mb-4">Please sign in to access admin controls.</p></div>'),Ye=x('<div class="container mx-auto p-4 max-w-2xl"><div class="flex justify-between items-center mb-6"><h1 class="text-3xl font-bold">Admin Dashboard</h1> <!></div> <!></div>');function st(e,g){we(g,!1);let v=S(null),f=S(""),c=S(""),d=S(""),h=S(""),m=S([]);ge(()=>{const a=Oe(Ce,o=>{b(v,o)});return()=>a()});async function R(){if(!t(f)||!t(c)){b(d,"Name and URL are required");return}try{const a={id:crypto.randomUUID(),name:t(f),url:t(c),createdAt:Date.now(),createdBy:t(v)?.email||t(v)?.uid},o={type:Me.ADD_SERVICE,payload:a,timestamp:Date.now(),user:t(v)?.email||t(v)?.uid};await Le($(X,"events"),o),b(h,`Service "${t(f)}" add event dispatched!`),b(f,""),b(c,""),b(d,""),setTimeout(()=>b(h,""),3e3)}catch(a){console.error(a),b(d,a.message)}}Se(()=>(t(v),ee),()=>{if(t(v)){const a=$(X,"events");ee(a,o=>{const p=o.val();p?b(m,Object.values(p).sort((A,U)=>U.timestamp-A.timestamp)):b(m,[])},o=>{console.error("Error reading events:",o)})}}),De(),Ne();var _=Ye(),T=i(_),ae=n(i(T),2);{var re=a=>{var o=Pe();j("click",o,function(...p){Te?.apply(this,p)}),u(a,o)},oe=a=>{var o=Ge();j("click",o,function(...p){Ue?.apply(this,p)}),u(a,o)};D(ae,a=>{t(v)?a(re):a(oe,!1)})}l(T);var se=n(T,2);{var le=a=>{var o=He(),p=ke(o),A=n(i(p),2);{var U=s=>{var r=je(),E=i(r,!0);l(r),C(()=>k(E,t(d))),u(s,r)};D(A,s=>{t(d)&&s(U)})}var F=n(A,2);{var ie=s=>{var r=Be(),E=i(r,!0);l(r),C(()=>k(E,t(h))),u(s,r)};D(F,s=>{t(h)&&s(ie)})}var N=n(F,2),H=n(i(N),2);Z(H),l(N);var O=n(N,2),W=n(i(O),2);Z(W),l(O);var ne=n(O,2);l(p);var Y=n(p,2),z=n(i(Y),2),L=i(z),J=n(i(L));Re(J,5,()=>t(m),Ae,(s,r)=>{var E=qe(),M=i(E),be=i(M,!0);l(M);var P=n(M),G=i(P),ue=i(G,!0);l(G),l(P);var K=n(P),fe=i(K);{var me=y=>{var I=Q();C(()=>k(I,(t(r),w(()=>t(r).payload.name)))),u(y,I)},pe=y=>{var I=Q("-");u(y,I)};D(fe,y=>{t(r),w(()=>t(r).payload&&t(r).payload.name)?y(me):y(pe,!1)})}l(K),l(E),C(y=>{k(be,y),Ie(G,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t(r),w(()=>t(r).type==="ADD_SERVICE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800")??""}`),k(ue,(t(r),w(()=>t(r).type)))},[()=>(t(r),w(()=>new Date(t(r).timestamp).toLocaleString()))]),u(s,E)}),l(J),l(L);var ve=n(L,2);{var ce=s=>{var r=Fe();u(s,r)};D(ve,s=>{t(m),w(()=>t(m).length===0)&&s(ce)})}l(z),l(Y),te(H,()=>t(f),s=>b(f,s)),te(W,()=>t(c),s=>b(c,s)),j("click",ne,R),u(a,o)},de=a=>{var o=We();u(a,o)};D(se,a=>{t(v)?a(le):a(de,!1)})}l(_),u(e,_),Ve()}export{st as component};
